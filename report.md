# Aderyn Analysis Report

This report was generated by [Aderyn](https://github.com/Cyfrin/aderyn), a static analysis tool built by [Cyfrin](https://cyfrin.io), a blockchain security company. This report is not a substitute for manual audit or security review. It should not be relied upon for any purpose other than to assist in the identification of potential security vulnerabilities.
# Table of Contents

- [Summary](#summary)
  - [Files Summary](#files-summary)
  - [Files Details](#files-details)
  - [Issue Summary](#issue-summary)
- [High Issues](#high-issues)
  - [H-1: `abi.encodePacked()` Hash Collision](#h-1-abiencodepacked-hash-collision)
  - [H-2: Contract Name Reused in Different Files](#h-2-contract-name-reused-in-different-files)
  - [H-3: Contract locks Ether without a withdraw function](#h-3-contract-locks-ether-without-a-withdraw-function)
  - [H-4: Reentrancy: State change after external call](#h-4-reentrancy-state-change-after-external-call)
- [Low Issues](#low-issues)
  - [L-1: Centralization Risk](#l-1-centralization-risk)
  - [L-2: Unsafe ERC20 Operation](#l-2-unsafe-erc20-operation)
  - [L-3: Unspecific Solidity Pragma](#l-3-unspecific-solidity-pragma)
  - [L-4: Address State Variable Set Without Checks](#l-4-address-state-variable-set-without-checks)
  - [L-5: Public Function Not Used Internally](#l-5-public-function-not-used-internally)
  - [L-6: Literal Instead of Constant](#l-6-literal-instead-of-constant)
  - [L-7: Unsafe `ERC721::_mint()`](#l-7-unsafe-erc721mint)
  - [L-8: PUSH0 Opcode](#l-8-push0-opcode)
  - [L-9: Modifier Invoked Only Once](#l-9-modifier-invoked-only-once)
  - [L-10: Internal Function Used Only Once](#l-10-internal-function-used-only-once)
  - [L-11: Unused Error](#l-11-unused-error)
  - [L-12: Loop Contains `require`/`revert`](#l-12-loop-contains-requirerevert)
  - [L-13: Unused State Variable](#l-13-unused-state-variable)
  - [L-14: Costly operations inside loop](#l-14-costly-operations-inside-loop)
  - [L-15: Unused Import](#l-15-unused-import)
  - [L-16: State Variable Could Be Constant](#l-16-state-variable-could-be-constant)
  - [L-17: State Change Without Event](#l-17-state-change-without-event)
  - [L-18: State Variable Could Be Immutable](#l-18-state-variable-could-be-immutable)
  - [L-19: Unchecked Return](#l-19-unchecked-return)


# Summary

## Files Summary

| Key | Value |
| --- | --- |
| .sol Files | 9 |
| Total nSLOC | 924 |


## Files Details

| Filepath | nSLOC |
| --- | --- |
| src/clanker-presale/Clanker.sol | 232 |
| src/clanker-presale/ClankerPresale.sol | 114 |
| src/clanker-presale/ClankerPresaleFactory.sol | 118 |
| src/clanker-presale/ClankerToken.sol | 61 |
| src/common/Counter.sol | 10 |
| src/common/IManager.sol | 32 |
| src/common/Interface.sol | 83 |
| src/common/LpLockerv2.sol | 191 |
| src/common/interface.sol | 83 |
| **Total** | **924** |


## Issue Summary

| Category | No. of Issues |
| --- | --- |
| High | 4 |
| Low | 19 |


# High Issues

## H-1: `abi.encodePacked()` Hash Collision

abi.encodePacked() should not be used with dynamic types when passing the result to a hash function such as `keccak256()`. Use `abi.encode()` instead which will pad items to 32 bytes, preventing hash collisions: https://docs.soliditylang.org/en/v0.8.13/abi-spec.html#non-standard-packed-mode. (e.g. `abi.encodePacked(0x123,0x456)` => `0x123456` => `abi.encodePacked(0x1,0x23456)`, but `abi.encode(0x123,0x456)` => `0x0...1230...456`). Unless there is a compelling reason, `abi.encode` should be preferred. If there is only one argument to `abi.encodePacked()` it can often be cast to `bytes()` or `bytes32()` instead: https://ethereum.stackexchange.com/questions/30912/how-to-compare-strings-in-solidity#answer-82739. If all arguments are strings and or bytes, `bytes.concat()` should be used instead.

<details><summary>1 Found Instances</summary>


- Found in src/clanker-presale/ClankerPresale.sol [Line: 157](src/clanker-presale/ClankerPresale.sol#L157)

	```solidity
	        return string(abi.encodePacked(baseTokenURI, tokenId.toString()));
	```

</details>



## H-2: Contract Name Reused in Different Files

When compiling contracts with certain development frameworks (for example: Truffle), having contracts with the same name across different files can lead to one being overwritten.

<details><summary>10 Found Instances</summary>


- Found in src/common/Interface.sol [Line: 4](src/common/Interface.sol#L4)

	```solidity
	interface INonfungiblePositionManager {
	```

- Found in src/common/Interface.sol [Line: 56](src/common/Interface.sol#L56)

	```solidity
	interface IUniswapV3Factory {
	```

- Found in src/common/Interface.sol [Line: 68](src/common/Interface.sol#L68)

	```solidity
	interface ILockerFactory {
	```

- Found in src/common/Interface.sol [Line: 75](src/common/Interface.sol#L75)

	```solidity
	interface ILocker {
	```

- Found in src/common/Interface.sol [Line: 94](src/common/Interface.sol#L94)

	```solidity
	interface ISwapRouter {
	```

- Found in src/common/interface.sol [Line: 4](src/common/Interface.sol#L4)

	```solidity
	interface INonfungiblePositionManager {
	```

- Found in src/common/interface.sol [Line: 56](src/common/Interface.sol#L56)

	```solidity
	interface IUniswapV3Factory {
	```

- Found in src/common/interface.sol [Line: 68](src/common/Interface.sol#L68)

	```solidity
	interface ILockerFactory {
	```

- Found in src/common/interface.sol [Line: 75](src/common/Interface.sol#L75)

	```solidity
	interface ILocker {
	```

- Found in src/common/interface.sol [Line: 94](src/common/Interface.sol#L94)

	```solidity
	interface ISwapRouter {
	```

</details>



## H-3: Contract locks Ether without a withdraw function

It appears that the contract includes a payable function to accept Ether but lacks a corresponding function to withdraw it, which leads to the Ether being locked in the contract. To resolve this issue, please implement a public or external function that allows for the withdrawal of Ether from the contract.

<details><summary>1 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 12](src/clanker-presale/Clanker.sol#L12)

	```solidity
	contract Clanker is Ownable {
	```

</details>



## H-4: Reentrancy: State change after external call

Changing state after an external call can lead to re-entrancy attacks.Use the checks-effects-interactions pattern to avoid this issue.

<details><summary>5 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 157](src/clanker-presale/Clanker.sol#L157)

	State is changed at: `deploymentInfoForToken[address(token)] = deploymentInfo`, `tokensDeployedByUsers[_deployer].push(deploymentInfo)`
	```solidity
	        int24 tickSpacing = uniswapV3Factory.feeAmountTickSpacing(_fee);
	```

- Found in src/clanker-presale/Clanker.sol [Line: 173](src/clanker-presale/Clanker.sol#L173)

	State is changed at: `deploymentInfoForToken[address(token)] = deploymentInfo`, `tokensDeployedByUsers[_deployer].push(deploymentInfo)`
	```solidity
	        token.approve(address(positionManager), _supply);
	```

- Found in src/clanker-presale/Clanker.sol [Line: 199](src/clanker-presale/Clanker.sol#L199)

	State is changed at: `deploymentInfoForToken[address(token)] = deploymentInfo`, `tokensDeployedByUsers[_deployer].push(deploymentInfo)`
	```solidity
	                amountOut = ISwapRouter(swapRouter).exactInputSingle{ // The call to `exactInputSingle` executes the swap.
	```

- Found in src/clanker-presale/Clanker.sol [Line: 203](src/clanker-presale/Clanker.sol#L203)

	State is changed at: `deploymentInfoForToken[address(token)] = deploymentInfo`, `tokensDeployedByUsers[_deployer].push(deploymentInfo)`
	```solidity
	                IERC20(_poolConfig.pairedToken).approve(
	```

- Found in src/clanker-presale/Clanker.sol [Line: 220](src/clanker-presale/Clanker.sol#L220)

	State is changed at: `deploymentInfoForToken[address(token)] = deploymentInfo`, `tokensDeployedByUsers[_deployer].push(deploymentInfo)`
	```solidity
	            ISwapRouter(swapRouter).exactInputSingle{
	```

</details>



# Low Issues

## L-1: Centralization Risk

Contracts have owners with privileged rights to perform admin tasks and need to be trusted to not perform malicious updates or drain funds.

<details><summary>19 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 12](src/clanker-presale/Clanker.sol#L12)

	```solidity
	contract Clanker is Ownable {
	```

- Found in src/clanker-presale/Clanker.sol [Line: 247](src/clanker-presale/Clanker.sol#L247)

	```solidity
	    function setAdmin(address admin, bool isAdmin) external onlyOwner {
	```

- Found in src/clanker-presale/Clanker.sol [Line: 254](src/clanker-presale/Clanker.sol#L254)

	```solidity
	    ) external onlyOwner {
	```

- Found in src/clanker-presale/Clanker.sol [Line: 268](src/clanker-presale/Clanker.sol#L268)

	```solidity
	    function setDeprecated(bool _deprecated) external onlyOwner {
	```

- Found in src/clanker-presale/Clanker.sol [Line: 272](src/clanker-presale/Clanker.sol#L272)

	```solidity
	    function updateLiquidityLocker(address newLocker) external onlyOwner {
	```

- Found in src/clanker-presale/ClankerPresale.sol [Line: 9](src/clanker-presale/ClankerPresale.sol#L9)

	```solidity
	contract ClankerPresale is ERC721, Ownable, ReentrancyGuard {
	```

- Found in src/clanker-presale/ClankerPresale.sol [Line: 108](src/clanker-presale/ClankerPresale.sol#L108)

	```solidity
	    function endPresale() external onlyOwner {
	```

- Found in src/clanker-presale/ClankerPresale.sol [Line: 115](src/clanker-presale/ClankerPresale.sol#L115)

	```solidity
	    function withdrawFunds() external onlyOwner {
	```

- Found in src/clanker-presale/ClankerPresale.sol [Line: 124](src/clanker-presale/ClankerPresale.sol#L124)

	```solidity
	    function updateConfig(PresaleConfig calldata newConfig) external onlyOwner {
	```

- Found in src/clanker-presale/ClankerPresale.sol [Line: 133](src/clanker-presale/ClankerPresale.sol#L133)

	```solidity
	    function setBaseURI(string calldata newBaseURI) external onlyOwner {
	```

- Found in src/clanker-presale/ClankerPresaleFactory.sol [Line: 7](src/clanker-presale/ClankerPresaleFactory.sol#L7)

	```solidity
	contract ClankerPresaleFactory is Ownable {
	```

- Found in src/clanker-presale/ClankerPresaleFactory.sol [Line: 43](src/clanker-presale/ClankerPresaleFactory.sol#L43)

	```solidity
	    function setAdmin(address admin, bool status) external onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 12](src/common/LpLockerv2.sol#L12)

	```solidity
	contract LpLockerv2 is Ownable, IERC721Receiver {
	```

- Found in src/common/LpLockerv2.sol [Line: 77](src/common/LpLockerv2.sol#L77)

	```solidity
	    ) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 85](src/common/LpLockerv2.sol#L85)

	```solidity
	    function updateClankerFactory(address newFactory) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 90](src/common/LpLockerv2.sol#L90)

	```solidity
	    function updateClankerTeamReward(uint256 newReward) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 95](src/common/LpLockerv2.sol#L95)

	```solidity
	    function updateClankerTeamRecipient(address newRecipient) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 100](src/common/LpLockerv2.sol#L100)

	```solidity
	    function withdrawETH(address recipient) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 105](src/common/LpLockerv2.sol#L105)

	```solidity
	    function withdrawERC20(address _token, address recipient) public onlyOwner {
	```

</details>



## L-2: Unsafe ERC20 Operation

ERC20 functions may not behave as expected. For example: return values are not always meaningful. It is recommended to use OpenZeppelin's SafeERC20 library.

<details><summary>9 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 173](src/clanker-presale/Clanker.sol#L173)

	```solidity
	        token.approve(address(positionManager), _supply);
	```

- Found in src/clanker-presale/Clanker.sol [Line: 203](src/clanker-presale/Clanker.sol#L203)

	```solidity
	                IERC20(_poolConfig.pairedToken).approve(
	```

- Found in src/clanker-presale/ClankerPresale.sol [Line: 119](src/clanker-presale/ClankerPresale.sol#L119)

	```solidity
	        payable(owner()).transfer(balance);
	```

- Found in src/common/LpLockerv2.sol [Line: 101](src/common/LpLockerv2.sol#L101)

	```solidity
	        payable(recipient).transfer(address(this).balance);
	```

- Found in src/common/LpLockerv2.sol [Line: 107](src/common/LpLockerv2.sol#L107)

	```solidity
	        IToken.transfer(recipient, IToken.balanceOf(address(this)));
	```

- Found in src/common/LpLockerv2.sol [Line: 172](src/common/LpLockerv2.sol#L172)

	```solidity
	        rewardToken0.transfer(_recipient, recipientReward0);
	```

- Found in src/common/LpLockerv2.sol [Line: 173](src/common/LpLockerv2.sol#L173)

	```solidity
	        rewardToken1.transfer(_recipient, recipientReward1);
	```

- Found in src/common/LpLockerv2.sol [Line: 175](src/common/LpLockerv2.sol#L175)

	```solidity
	        rewardToken0.transfer(teamRecipient, protocolReward0);
	```

- Found in src/common/LpLockerv2.sol [Line: 176](src/common/LpLockerv2.sol#L176)

	```solidity
	        rewardToken1.transfer(teamRecipient, protocolReward1);
	```

</details>



## L-3: Unspecific Solidity Pragma

Consider using a specific version of Solidity in your contracts instead of a wide version. For example, instead of `pragma solidity ^0.8.0;`, use `pragma solidity 0.8.0;`

<details><summary>9 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 2](src/clanker-presale/Clanker.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

- Found in src/clanker-presale/ClankerPresale.sol [Line: 2](src/clanker-presale/ClankerPresale.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

- Found in src/clanker-presale/ClankerPresaleFactory.sol [Line: 2](src/clanker-presale/ClankerPresaleFactory.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 2](src/clanker-presale/ClankerToken.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

- Found in src/common/Counter.sol [Line: 2](src/common/Counter.sol#L2)

	```solidity
	pragma solidity ^0.8.13;
	```

- Found in src/common/IManager.sol [Line: 2](src/common/IManager.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

- Found in src/common/Interface.sol [Line: 2](src/common/Interface.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

- Found in src/common/LpLockerv2.sol [Line: 2](src/common/LpLockerv2.sol#L2)

	```solidity
	pragma solidity ^0.8.26;
	```

- Found in src/common/interface.sol [Line: 2](src/common/Interface.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

</details>



## L-4: Address State Variable Set Without Checks

Check for `address(0)` when assigning values to address state variables.

<details><summary>11 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 75](src/clanker-presale/Clanker.sol#L75)

	```solidity
	        liquidityLocker = LpLockerv2(locker_);
	```

- Found in src/clanker-presale/Clanker.sol [Line: 76](src/clanker-presale/Clanker.sol#L76)

	```solidity
	        uniswapV3Factory = IUniswapV3Factory(uniswapV3Factory_);
	```

- Found in src/clanker-presale/Clanker.sol [Line: 77](src/clanker-presale/Clanker.sol#L77)

	```solidity
	        positionManager = INonfungiblePositionManager(positionManager_);
	```

- Found in src/clanker-presale/Clanker.sol [Line: 78](src/clanker-presale/Clanker.sol#L78)

	```solidity
	        swapRouter = swapRouter_;
	```

- Found in src/clanker-presale/Clanker.sol [Line: 273](src/clanker-presale/Clanker.sol#L273)

	```solidity
	        liquidityLocker = LpLockerv2(newLocker);
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 31](src/clanker-presale/ClankerToken.sol#L31)

	```solidity
	        _deployer = deployer_;
	```

- Found in src/common/LpLockerv2.sol [Line: 59](src/common/LpLockerv2.sol#L59)

	```solidity
	        SafeERC721 = IERC721(token);
	```

- Found in src/common/LpLockerv2.sol [Line: 61](src/common/LpLockerv2.sol#L61)

	```solidity
	        _factory = tokenFactory;
	```

- Found in src/common/LpLockerv2.sol [Line: 63](src/common/LpLockerv2.sol#L63)

	```solidity
	        _clankerTeamRecipient = clankerTeamRecipient;
	```

- Found in src/common/LpLockerv2.sol [Line: 86](src/common/LpLockerv2.sol#L86)

	```solidity
	        _factory = newFactory;
	```

- Found in src/common/LpLockerv2.sol [Line: 96](src/common/LpLockerv2.sol#L96)

	```solidity
	        _clankerTeamRecipient = newRecipient;
	```

</details>



## L-5: Public Function Not Used Internally

If a function is marked public but is not used internally, consider marking it as `external`.

<details><summary>17 Found Instances</summary>


- Found in src/clanker-presale/ClankerToken.sol [Line: 38](src/clanker-presale/ClankerToken.sol#L38)

	```solidity
	    function updateImage(string memory image_) public {
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 59](src/clanker-presale/ClankerToken.sol#L59)

	```solidity
	    function fid() public view returns (uint256) {
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 63](src/clanker-presale/ClankerToken.sol#L63)

	```solidity
	    function deployer() public view returns (address) {
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 67](src/clanker-presale/ClankerToken.sol#L67)

	```solidity
	    function image() public view returns (string memory) {
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 71](src/clanker-presale/ClankerToken.sol#L71)

	```solidity
	    function castHash() public view returns (string memory) {
	```

- Found in src/common/Counter.sol [Line: 7](src/common/Counter.sol#L7)

	```solidity
	    function setNumber(uint256 newNumber) public {
	```

- Found in src/common/Counter.sol [Line: 11](src/common/Counter.sol#L11)

	```solidity
	    function increment() public {
	```

- Found in src/common/LpLockerv2.sol [Line: 73](src/common/LpLockerv2.sol#L73)

	```solidity
	    function setOverrideTeamRewardsForToken(
	```

- Found in src/common/LpLockerv2.sol [Line: 85](src/common/LpLockerv2.sol#L85)

	```solidity
	    function updateClankerFactory(address newFactory) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 90](src/common/LpLockerv2.sol#L90)

	```solidity
	    function updateClankerTeamReward(uint256 newReward) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 95](src/common/LpLockerv2.sol#L95)

	```solidity
	    function updateClankerTeamRecipient(address newRecipient) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 100](src/common/LpLockerv2.sol#L100)

	```solidity
	    function withdrawETH(address recipient) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 105](src/common/LpLockerv2.sol#L105)

	```solidity
	    function withdrawERC20(address _token, address recipient) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 111](src/common/LpLockerv2.sol#L111)

	```solidity
	    function collectRewards(uint256 _tokenId) public {
	```

- Found in src/common/LpLockerv2.sol [Line: 189](src/common/LpLockerv2.sol#L189)

	```solidity
	    function getLpTokenIdsForUser(
	```

- Found in src/common/LpLockerv2.sol [Line: 195](src/common/LpLockerv2.sol#L195)

	```solidity
	    function addUserRewardRecipient(
	```

- Found in src/common/LpLockerv2.sol [Line: 202](src/common/LpLockerv2.sol#L202)

	```solidity
	    function replaceUserRewardRecipient(
	```

</details>



## L-6: Literal Instead of Constant

Define and use `constant` variables instead of using literals. If the same constant literal value is used multiple times, create a constant state variable and reference it throughout the contract.

<details><summary>2 Found Instances</summary>


- Found in src/common/LpLockerv2.sol [Line: 166](src/common/LpLockerv2.sol#L166)

	```solidity
	        uint256 protocolReward0 = (amount0 * teamReward) / 100;
	```

- Found in src/common/LpLockerv2.sol [Line: 167](src/common/LpLockerv2.sol#L167)

	```solidity
	        uint256 protocolReward1 = (amount1 * teamReward) / 100;
	```

</details>



## L-7: Unsafe `ERC721::_mint()`

Using `ERC721::_mint()` can mint ERC721 tokens to addresses which don't support ERC721 tokens. Use `_safeMint()` instead of `_mint()` for ERC721 tokens.

<details><summary>1 Found Instances</summary>


- Found in src/clanker-presale/ClankerPresale.sol [Line: 101](src/clanker-presale/ClankerPresale.sol#L101)

	```solidity
	            _mint(msg.sender, tokenId);
	```

</details>



## L-8: PUSH0 Opcode

Solc compiler version 0.8.20 switches the default target EVM version to Shanghai, which means that the generated bytecode will include PUSH0 opcodes. Be sure to select the appropriate EVM version in case you intend to deploy on a chain other than mainnet like L2 chains that may not support PUSH0, otherwise deployment of your contracts will fail.

<details><summary>9 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 2](src/clanker-presale/Clanker.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

- Found in src/clanker-presale/ClankerPresale.sol [Line: 2](src/clanker-presale/ClankerPresale.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

- Found in src/clanker-presale/ClankerPresaleFactory.sol [Line: 2](src/clanker-presale/ClankerPresaleFactory.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 2](src/clanker-presale/ClankerToken.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

- Found in src/common/Counter.sol [Line: 2](src/common/Counter.sol#L2)

	```solidity
	pragma solidity ^0.8.13;
	```

- Found in src/common/IManager.sol [Line: 2](src/common/IManager.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

- Found in src/common/Interface.sol [Line: 2](src/common/Interface.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

- Found in src/common/LpLockerv2.sol [Line: 2](src/common/LpLockerv2.sol#L2)

	```solidity
	pragma solidity ^0.8.26;
	```

- Found in src/common/interface.sol [Line: 2](src/common/Interface.sol#L2)

	```solidity
	pragma solidity ^0.8.25;
	```

</details>



## L-9: Modifier Invoked Only Once

Consider removing the modifier or inlining the logic into the calling function.

<details><summary>3 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 62](src/clanker-presale/Clanker.sol#L62)

	```solidity
	    modifier onlyOwnerOrAdmin() {
	```

- Found in src/clanker-presale/ClankerPresaleFactory.sol [Line: 38](src/clanker-presale/ClankerPresaleFactory.sol#L38)

	```solidity
	    modifier onlyOwnerOrAdmin() {
	```

- Found in src/common/LpLockerv2.sol [Line: 66](src/common/LpLockerv2.sol#L66)

	```solidity
	    modifier onlyOwnerOrFactory() {
	```

</details>



## L-10: Internal Function Used Only Once

Instead of separating the logic into a separate function, consider inlining the logic into the calling function. This can reduce the number of function calls and improve readability.

<details><summary>2 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 87](src/clanker-presale/Clanker.sol#L87)

	```solidity
	    function configurePool(
	```

- Found in src/clanker-presale/Clanker.sol [Line: 278](src/clanker-presale/Clanker.sol#L278)

	```solidity
	function maxUsableTick(int24 tickSpacing) pure returns (int24) {
	```

</details>



## L-11: Unused Error

Consider using or removing the unused error.

<details><summary>3 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 16](src/clanker-presale/Clanker.sol#L16)

	```solidity
	    error InvalidConfig();
	```

- Found in src/clanker-presale/ClankerPresale.sol [Line: 49](src/clanker-presale/ClankerPresale.sol#L49)

	```solidity
	    error InvalidTimestamp();
	```

- Found in src/clanker-presale/ClankerPresaleFactory.sol [Line: 9](src/clanker-presale/ClankerPresaleFactory.sol#L9)

	```solidity
	    error PresaleAlreadyExists();
	```

</details>



## L-12: Loop Contains `require`/`revert`

Avoid `require` / `revert` statements in a loop because a single bad item can cause the whole transaction to fail. It's better to forgive on fail and return failed elements post processing of the loop

<details><summary>1 Found Instances</summary>


- Found in src/clanker-presale/ClankerPresale.sol [Line: 99](src/clanker-presale/ClankerPresale.sol#L99)

	```solidity
	        for (uint256 i = 0; i < quantity; i++) {
	```

</details>



## L-13: Unused State Variable

State variable appears to be unused. No analysis has been performed to see if any inline assembly references it. Consider removing this unused variable.

<details><summary>3 Found Instances</summary>


- Found in src/clanker-presale/ClankerToken.sol [Line: 13](src/clanker-presale/ClankerToken.sol#L13)

	```solidity
	    string private _name;
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 14](src/clanker-presale/ClankerToken.sol#L14)

	```solidity
	    string private _symbol;
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 15](src/clanker-presale/ClankerToken.sol#L15)

	```solidity
	    uint8 private immutable _decimals;
	```

</details>



## L-14: Costly operations inside loop

Invoking `SSTORE` operations in loops may waste gas. Use a local variable to hold the loop computation result.

<details><summary>2 Found Instances</summary>


- Found in src/clanker-presale/ClankerPresale.sol [Line: 99](src/clanker-presale/ClankerPresale.sol#L99)

	```solidity
	        for (uint256 i = 0; i < quantity; i++) {
	```

- Found in src/common/LpLockerv2.sol [Line: 220](src/common/LpLockerv2.sol#L220)

	```solidity
	        for (uint256 i = 0; i < tokenIds.length; i++) {
	```

</details>



## L-15: Unused Import

Redundant import statement. Consider removing it.

<details><summary>2 Found Instances</summary>


- Found in src/common/LpLockerv2.sol [Line: 7](src/common/LpLockerv2.sol#L7)

	```solidity
	import "@openzeppelin/contracts/utils/Context.sol";
	```

- Found in src/common/LpLockerv2.sol [Line: 8](src/common/LpLockerv2.sol#L8)

	```solidity
	import "@openzeppelin/contracts/utils/Address.sol";
	```

</details>



## L-16: State Variable Could Be Constant

State variables that are not updated following deployment should be declared constant to save gas. Add the `constant` attribute to state variables that never change.

<details><summary>2 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 24](src/clanker-presale/Clanker.sol#L24)

	```solidity
	    address public weth = 0x4200000000000000000000000000000000000006;
	```

- Found in src/common/LpLockerv2.sol [Line: 31](src/common/LpLockerv2.sol#L31)

	```solidity
	    address public positionManager = 0x03a520b32C04BF3bEEf7BEb72E919cf822Ed34f1;
	```

</details>



## L-17: State Change Without Event

There are state variable changes in this function but no event is emitted. Consider emitting an event to enable offchain indexers to track the changes.

<details><summary>14 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 247](src/clanker-presale/Clanker.sol#L247)

	```solidity
	    function setAdmin(address admin, bool isAdmin) external onlyOwner {
	```

- Found in src/clanker-presale/Clanker.sol [Line: 251](src/clanker-presale/Clanker.sol#L251)

	```solidity
	    function toggleAllowedPairedToken(
	```

- Found in src/clanker-presale/Clanker.sol [Line: 268](src/clanker-presale/Clanker.sol#L268)

	```solidity
	    function setDeprecated(bool _deprecated) external onlyOwner {
	```

- Found in src/clanker-presale/Clanker.sol [Line: 272](src/clanker-presale/Clanker.sol#L272)

	```solidity
	    function updateLiquidityLocker(address newLocker) external onlyOwner {
	```

- Found in src/clanker-presale/ClankerPresaleFactory.sol [Line: 43](src/clanker-presale/ClankerPresaleFactory.sol#L43)

	```solidity
	    function setAdmin(address admin, bool status) external onlyOwner {
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 38](src/clanker-presale/ClankerToken.sol#L38)

	```solidity
	    function updateImage(string memory image_) public {
	```

- Found in src/common/Counter.sol [Line: 7](src/common/Counter.sol#L7)

	```solidity
	    function setNumber(uint256 newNumber) public {
	```

- Found in src/common/Counter.sol [Line: 11](src/common/Counter.sol#L11)

	```solidity
	    function increment() public {
	```

- Found in src/common/LpLockerv2.sol [Line: 73](src/common/LpLockerv2.sol#L73)

	```solidity
	    function setOverrideTeamRewardsForToken(
	```

- Found in src/common/LpLockerv2.sol [Line: 85](src/common/LpLockerv2.sol#L85)

	```solidity
	    function updateClankerFactory(address newFactory) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 90](src/common/LpLockerv2.sol#L90)

	```solidity
	    function updateClankerTeamReward(uint256 newReward) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 95](src/common/LpLockerv2.sol#L95)

	```solidity
	    function updateClankerTeamRecipient(address newRecipient) public onlyOwner {
	```

- Found in src/common/LpLockerv2.sol [Line: 195](src/common/LpLockerv2.sol#L195)

	```solidity
	    function addUserRewardRecipient(
	```

- Found in src/common/LpLockerv2.sol [Line: 202](src/common/LpLockerv2.sol#L202)

	```solidity
	    function replaceUserRewardRecipient(
	```

</details>



## L-18: State Variable Could Be Immutable

State variables that are only changed in the constructor should be declared immutable to save gas. Add the `immutable` attribute to state variables that are only changed in the constructor

<details><summary>7 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 26](src/clanker-presale/Clanker.sol#L26)

	```solidity
	    IUniswapV3Factory public uniswapV3Factory;
	```

- Found in src/clanker-presale/Clanker.sol [Line: 27](src/clanker-presale/Clanker.sol#L27)

	```solidity
	    INonfungiblePositionManager public positionManager;
	```

- Found in src/clanker-presale/Clanker.sol [Line: 28](src/clanker-presale/Clanker.sol#L28)

	```solidity
	    address public swapRouter;
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 17](src/clanker-presale/ClankerToken.sol#L17)

	```solidity
	    address private _deployer;
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 18](src/clanker-presale/ClankerToken.sol#L18)

	```solidity
	    uint256 private _fid;
	```

- Found in src/clanker-presale/ClankerToken.sol [Line: 20](src/clanker-presale/ClankerToken.sol#L20)

	```solidity
	    string private _castHash;
	```

- Found in src/common/LpLockerv2.sol [Line: 29](src/common/LpLockerv2.sol#L29)

	```solidity
	    IERC721 private SafeERC721;
	```

</details>



## L-19: Unchecked Return

Function returns a value but it is ignored. Consider checking the return value.

<details><summary>7 Found Instances</summary>


- Found in src/clanker-presale/Clanker.sol [Line: 173](src/clanker-presale/Clanker.sol#L173)

	```solidity
	        token.approve(address(positionManager), _supply);
	```

- Found in src/clanker-presale/Clanker.sol [Line: 203](src/clanker-presale/Clanker.sol#L203)

	```solidity
	                IERC20(_poolConfig.pairedToken).approve(
	```

- Found in src/common/LpLockerv2.sol [Line: 107](src/common/LpLockerv2.sol#L107)

	```solidity
	        IToken.transfer(recipient, IToken.balanceOf(address(this)));
	```

- Found in src/common/LpLockerv2.sol [Line: 172](src/common/LpLockerv2.sol#L172)

	```solidity
	        rewardToken0.transfer(_recipient, recipientReward0);
	```

- Found in src/common/LpLockerv2.sol [Line: 173](src/common/LpLockerv2.sol#L173)

	```solidity
	        rewardToken1.transfer(_recipient, recipientReward1);
	```

- Found in src/common/LpLockerv2.sol [Line: 175](src/common/LpLockerv2.sol#L175)

	```solidity
	        rewardToken0.transfer(teamRecipient, protocolReward0);
	```

- Found in src/common/LpLockerv2.sol [Line: 176](src/common/LpLockerv2.sol#L176)

	```solidity
	        rewardToken1.transfer(teamRecipient, protocolReward1);
	```

</details>



